-- Show less information in error messages due to different output of different
-- PostgreSQL versions
\set VERBOSITY terse
create extension saturated_int;
-- Test cast to saturated_int
select 999999999999999::saturated_int;
 saturated_int 
---------------
 2147483647
(1 row)

select 2147483648::saturated_int;
 saturated_int 
---------------
 2147483647
(1 row)

select 2147483647::saturated_int;
 saturated_int 
---------------
 2147483647
(1 row)

select (-2147483649)::saturated_int;
 saturated_int 
---------------
 -2147483648
(1 row)

select (-2147483648)::saturated_int;
 saturated_int 
---------------
 -2147483648
(1 row)

-- Test comparison operators
select 999999999999999::saturated_int < 2147483648::saturated_int;
 ?column? 
----------
 f
(1 row)

select 999999999999999::saturated_int > 2147483648::saturated_int;
 ?column? 
----------
 f
(1 row)

select 999999999999999::saturated_int = 2147483648::saturated_int;
 ?column? 
----------
 t
(1 row)

select 2147483647::saturated_int = 2147483648::saturated_int;
 ?column? 
----------
 t
(1 row)

select 2147483647::saturated_int <= 2147483648::saturated_int;
 ?column? 
----------
 t
(1 row)

select 2147483646::saturated_int = 2147483648::saturated_int;
 ?column? 
----------
 f
(1 row)

select 2147483646::saturated_int < 2147483648::saturated_int;
 ?column? 
----------
 t
(1 row)

select 2147483646::saturated_int <= 2147483648::saturated_int;
 ?column? 
----------
 t
(1 row)

select 2147483647::saturated_int > 2147483648::saturated_int;
 ?column? 
----------
 f
(1 row)

select 2147483647::saturated_int >= 2147483648::saturated_int;
 ?column? 
----------
 t
(1 row)

-- ERROR: operator does not exist
select 2147483647::int = 2147483648::saturated_int;
ERROR:  operator does not exist: integer = saturated_int at character 24
select 2147483647::int > 2147483648::saturated_int;
ERROR:  operator does not exist: integer > saturated_int at character 24
select 2147483647::int >= 2147483648::saturated_int;
ERROR:  operator does not exist: integer >= saturated_int at character 24
select 2147483647::int <= 2147483648::saturated_int;
ERROR:  operator does not exist: integer <= saturated_int at character 24
select 2147483647::int < 2147483648::saturated_int;
ERROR:  operator does not exist: integer < saturated_int at character 24
